#!/bin/sh

out="<span size='larger'>󰊵</span>"

i=0
for p in /sys/class/power_supply/ps-controller*; do
	[ -d "$p" ] || continue

	capacity="$(cat "$p/capacity")"
	state="$(cat "$p/status")"
	icon="<span size='larger'>󰊴</span>"
	i=$((i+1))

	case "$state" in
		Discharging) state="↓" ;;
		Charging)    state="↑" ;;
	esac

	[ "$capacity" -lt 30 ] && icon="󰝎"
	controller="$icon:${capacity}%$state"

	if [ "$i" -eq 1 ]; then
		out="$controller"
	else
		out="$out $controller"
	fi
done

printf "%s" "$out"
